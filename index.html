-- adiciona updated_at se n√£o existir
alter table notes
  add column if not exists updated_at timestamp with time zone;

-- trigger para atualizar updated_at automaticamente em qualquer UPDATE
create or replace function set_updated_at_notes()
returns trigger language plpgsql as $$
begin
  new.updated_at = now();
  return new;
end $$;

drop trigger if exists trg_notes_updated_at on notes;
create trigger trg_notes_updated_at
before update on notes
for each row
execute procedure set_updated_at_notes();
